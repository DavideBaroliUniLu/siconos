\documentclass[a4paper,twoside,openright,makeidx,12pt]{report}


% --------------------PAGE SETUP--------------------------------------%
\input{macro.tex}
% \glxitemorderdefault{acr}{s}

\includeonly{}
\usepackage{fancyheadings} 
% \usepackage[francais]{babel}

\pagestyle{fancy} 
\renewcommand{\chaptermark}[1]% 
{\markboth{{Chap-- \thechapter.\ #1}}{}} 
\renewcommand{\sectionmark}[1]% 
{\markright{{\thesection.\ #1}}} 
\setlength{\headrulewidth}{0.5pt} 
\setlength{\footrulewidth}{0.5pt} 
\newcommand{\helv}{% 
  \fontfamily{phv}\fontseries{b}\fontsize{9}{11}\selectfont} 
\lhead[\helv \thepage/\pageref{LastPage}]{\helv \rightmark} 
\rhead[\helv \leftmark]{\helv \thepage/\pageref{LastPage}} 
\cfoot{Coding and documentation Standard -- November 5th, 2004}

\makeindex

\begin{document}
\pagestyle{empty}
\renewcommand{\arraystretch}{1.8}

\input{coverCDS.tex}

\tableofcontents
% \clearpage
\pagestyle{fancy}
\pagenumbering{arabic}
% ---------------------------------------------------------------------%
% ---------------------------------------------------------------------%

% ######### TAGS

% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

% ######### 

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%

% #########

% -----------------------	sub-section	-----------------------------------------%

% ---------------------------------------------------------------------%

% --------------------TEXT --------------------------------------------%

% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

\chapter{Code documentation rules}

this chapter aims at defining the documentary structure of C++ methods and classes.\\
Code documentation is written in english thanks to \textit{Doxygen}.\\

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{C++ classes documentation}

A class has to be documented with the following \textit{Doxygen} tags :\\\\
\verb+/+** \verb+\+\textbf{class} \textit{class name} \\
\verb+ *  \+\textbf{brief} \textit{general role of the class} \\
\verb+ *  \+\textbf{author} \textit{author of the class} \\
\verb+ *  \+\textbf{version} \textit{class version} \\
\verb+ *  \+\textbf{date} \textit{Date of creation of the first version : mm/dd/yyyy} \\
\verb+ *  \+\textbf{\$Date\$} \textit{CVS : date of the current version }\\
\verb+ *  \+\textbf{\$Revision\$} \textit{CVS : revision }\\
\verb+ *  \+\textbf{\$Author\$} \textit{CVS : author of this revision }\\
\verb+ *  \+\textbf{\$Source\$} \textit{CVS : source of the current version }\\
\verb+ *  \+\textbf{bug} \textit{indicates a bug (a line by bug)} \\
\verb+ *  \+\textbf{warning} \textit{indicates a warning concerning this class (a line by warning)} \\
\verb+ *   +\\
\verb+ * + \\
\verb+ * +\textit{describes the main features of the class.} \\
\verb+ */ + \\
\textbf{class} \textit{MyClass} \\\verb+{+\\\verb+    ...+\\\verb+}+;

% \pagebreak 

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{C++ methods Documentation}

A method has to be documented with the following \textit{Doxygen} tags :\\\\
\verb+/+** \verb+\+\textbf{fn} const char *MyClass::exemple(char c, int n) -- \textit{indicates the interface of the} \\
\verb+ *   +  \textit{method} \\
\verb+ *  \+\textbf{brief} this method calculates ... -- \textit{describes role of the method} \\
\verb+ *  \+\textbf{param} char c : ... -- \textit{precises the utility of each parameter} \\
\verb+ *  \+\textbf{param} int n :  ...  -- \\
\verb+ *  \+\textbf{exception} std::out\verb+_+of\verb+_+range throw if a parameter is out of range -- \textit{define} \\
\verb+ *   +\textit{  the exceptions which can be thrown }\\
\verb+ *  \+\textbf{return} a...-- \textit{type of return value, precises specific values if necessary}\\
\verb+ */ + \\ 
\textbf{const char} *exemple(\textbf{char c}, \textbf{int *n}) \textbf{throw} (\verb+std::+\textbf{out}\verb+_+\textbf{of}\verb+_+\textbf{range}\verb+)+\verb+;+ \\\\
\verb+}+

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%

\section{Makefile documentation}

% A Makefile must start by the following cartridge :\\\\
% \#-------------------------------------------------------------------------- \\
% \#\verb+                +SICONOS PROJECT\\
% \#\verb+  +\textit{Library name or application name}\\
% \#-------------------------------------------------------------------------- \\
% \# Author(s): \textit{your name - his name - ...}\\
% \# Creation date: \textit{mm/dd/yyyy}\\
% \# Version: \textit{the first version is 1.0, the second 1.1 ...}\\
% \# Copyright INRIA\\
% \#--------------------------------------------------------------------------\\
% \# Description: \textit{what is done?(library? executable file?)}\\
% \#--------------------------------------------------------------------------\\
% \# Options: \textit{- all : to compile all files}\\
% \#\verb+         +\textit{- clean : to delete executables files}\\
% \#\verb+         +\textit{- ... }\\
% \#--------------------------------------------------------------------------\\ 
% \# Compiled files: \textit{precise the files your Makefile can compile} \\
% \#--------------------------------------------------------------------------\\
% \# Last Modifications:\textit{- first} \\
% \#\verb+                 +\textit{- second} \\
% \#\verb+                 +\textit{...} \\
% \# Date of Modification: \textit{mm/dd/yyyy} \\
% \#--------------------------------------------------------------------------\\\\


% Main compilation flags must appear in all Makefiles : 

% \begin{itemize}
% \item all
% \item build
% \item clean
% \end{itemize} 

Makefiles are generated by autotools. The configure script scans sources directories and produces automatically Makefiles. 
The developer must write in each directory which has to be included in the distribution a file named Makefile.am.

The root Makefile has 3 main targets : all, install, dist.

\ac{tbc}

% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

\chapter{Naming convention}

An identifier (it can be an acronym) must be meaningful for the domain problem and in english.

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{User-defined types}

User-defined types include definitions of class, enum, struct and union, as well as the redefined types by typedef. All user-defined type names should start with an upper case letter. From left to right, each word in a type name should look like an adjective to the immediately following one. \\
Example : 
\begin{verbatim}class MyBeautifulClass; \end{verbatim}


% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{variable}

\begin{itemize}
\item Obvious loop variables are also exempt from rules. They can take simple names like i or j. 
\item All variables names should start with a lower case letter.\\
  Example : \begin{verbatim}identifier \end{verbatim}	
\item In a name that consists of more than one words, each word following the first one should start with an upper case letter and all 		the other letters in that word must be in lower case, even if the word is an acronym. \\
  Example : \begin{verbatim}myVariableIdentifier \end{verbatim}
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Constants}

Constant identifier in a class scope can be prefixed by this class name. \\
Constant identifier must be in capitals, the word separator is "\_". \\
Example : \begin{verbatim}MYCLASS_MY_CONST \end{verbatim}
Using macros to define constants is unsuitable : \begin{verbatim}#define PI 3.14 \end{verbatim}
Use C keyword "const" instead: \begin{verbatim}const double PI = 3.14;\end{verbatim} Constants must be declared in header files, before class declaration.\\

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Functions and Methods}

\begin{itemize}
\item All function names should start with a lower case letter.\\
  Example : \begin{verbatim}identifier()\end{verbatim}
\item In a name that consists of more than one words, each word following the first one should start with an upper case letter and all 		the other letters in that word must be in lower case, even if the word is an acronym.\\
  Example : \begin{verbatim}myFunctionIdentifier()\end{verbatim}
\item Member access functions must be prefixed by \textit{get} ou \textit{set}. \\
  Example : \begin{verbatim}setTime, getTime \end{verbatim}
\item Boolean functions names should begin by keyword \textit{is} ou \textit{has}.\\
  Example : \begin{verbatim}isTimeOut, hasTime\end{verbatim}
\item Getter and Setter on pointers on class members must be postfixed by \textit{Ptr}.\\
  Example : \begin{verbatim}getStateVectorPtr() \end{verbatim}
\end{itemize}

% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

\chapter{C++ coding guidelines}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Organization}

\begin{itemize}
\item Each header file should be self-contained, which means that nothing other than the inclusion the single header file is needed to 		access all the public entities defined there.
\item Avoid unnecessary inclusion.
\item No avoidable warnings should appear while compiling with the highest level of the compiler warning switch.
\item Each header file should be wrapped with multiple inclusion protection macros.
\item Implement inline methods outside the corresponding class definition except for some really small methods.(the debugger cannot expand inline methods)
\item Implement functions and methods in the same order that they were declared.
\item Each file stored on CVS server should begin by CVS command \$Id\$ and end by \$Log\$ to get minimal data concerning its version, date, etc.
\item Use Doxygen tags (todo,  warning) instead of simple C++ comments.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Control flow}

\begin{itemize}
\item Do not change any loop variable inside a loop. 
\item All switch statements should have a default clause. 
\item Follow all case clauses of a switch statement by a block to create a local scope with  break  at the end.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Functions and Methods}

\begin{itemize}
\item Use pass-by-pointer, instead of pass-by-reference, to allow modification of arguments, which emphasizes this specific intention. 
\item Declare reference and pointer arguments of functions and methods, and methods themselves as const whenever possible.
\item Do not use numeric or string literals inside any function or method implementation unless these values are part of an algorithm. 
\item Use  using  instead of  using namespace  to import a definition into current context except for some very small scope.
\item Include this-> explicitly in calling member methods from a same class.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Interface}

\begin{itemize}
\item No global variables are allowed unless required by some application framework. 
\item Initialize variables in the same order as they are declared. 
\item No data item should be public. Use inline method to define a property instead. 
\item An overloaded assignment operator should work properly when the right operand is the same object as the left operand. 
\item Always redeclare virtual methods as virtual in derived classes. 
\item Avoid multiple inheritance except for implementing multiple interfaces.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Resource Management}

\begin{itemize}
\item Use constructors and destructors to manage resources. 
\item Be aware that delete does not reset the pointer to 0. 
\item Do not delete the memory block pointed by any passed argument pointer. 
\item \textit{Use auto\_ptr<> to wrap a returned memory block from a method/function.}
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Preprocessing}

\begin{itemize}
\item Use  \#if 0  instead of C/C++ comments to exclude certain codes.
\item Group  \#include  statements and sort them in each group. Usually, the lower level files come first.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Conversion and Cast}

\begin{itemize}
\item Use static\_cast operator instead of C-style casts.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{C++ references}

\textit{Thinking in C++ web site :} http://www.mindview.net/Books/TICPP/ThinkingInCPP2e.html



% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Error Handling}

\begin{itemize}
\item Declare exception specification if all possible exceptions are known.
\item Validation of inputs should not be handled with exceptions.
\item Exceptions should be thrown only for the situations whose timing cannot be predicted in the static linking stage and the code 		unit throwing an exception does not know how to handle it.
\item Organize different types of exceptions into an exception tree based on the STL exception hierarchy.
\end{itemize}
To get further information about error messages, see \ac{esd}.

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Design by contract}

The use of nana library to especially verify input parameters of function is advised.
the basic macros are :
\begin{itemize}
\item IN(message) : displays a message on standard output when the program enters in a function.
\item OUT(message) : displays a message on standard output when the program exits from a function.
  Example : \\ 
\begin{verbatim} 
void myFunction()
{
  IN("myFunction");
  ...
  OUT("myFunction");
}                 
\end{verbatim}
\item ASSERT(expr) : tests if boolean expression expr is true. If expr is false, a message is displayed on standard output.
\end{itemize}


% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

\chapter{Coding Style}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Formatting}

\begin{itemize}
\item Braces are always on a line by themselves for classes, methods/functions, and namespaces, while the opening braces for other code 	blocks may be placed on the same line as the opening statements.
\item A newline is required at the end of a file. 
\item Leave no space between  \&  or  *  and the corresponding type.
\item Use blank lines to separate logical groups within functions and methods.
\item Put one space in both sides of an operator and none immediately after  (  or before  ) .
\item Break a line after an operator, and align the next line properly.
\end{itemize}


% ----------------------------------------------------------------------------------------%
% %
% CHAPTER                                          %
% %
% ----------------------------------------------------------------------------------------%

\chapter{Documentation standard}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{General rules}

\textbf{All the documentation concerning the project MUST be written in english.}

\begin{itemize}
\item The document of SICONOS Project should be designed with the text processing software \LaTeX.
\item The produced documents are available on the web site of Siconos/WP2 in pdf files.
\item Naming convention is : DocumentCode-Vx.y.pdf.\\ \underline{This file name must be consistent with the document cover data !}
\item It is important to take care to the structure of the document. Try to follow standard documents plans.
\item Give a definition of rare or technical words and acronyms in a glossary.Most of SICONOS documents use GlossTeX and the acronyms of contained in the TeX-tools directory available in CVS.% for that point.
\item The document must contain a table of contents, a list of figures and tables, and possibly a glossary (see previous item)
\item Avoid repetitions, reference other documents instead.
\item Schemas included in documents must be in eps format.
\end{itemize}

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{TeX-tools module}

This module contains tools for \LaTeX used in the documentation of the project. It is downloadable on the CVS server.


\newpage
% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Standard cover of SICONOS documents}

The cover contains useful data (changes log, date, author, etc.). It is important to update it after each important changing on the document.

The cartridges of the history of the documents must be carefully documented, following these rules :
\begin{itemize}
\item First page of cover : 
  \begin{enumerate}
  \item if status = ``in progress'' then date = current date (\LaTeX  command : \\\today)
  \item if status = ``validated'' then date = date of validation. 
  \end{enumerate}
\item Second page of cover : \\
  the rule for the date is the same. When a validated version is updated (the document becomes in progress again), the data of ``current version'' cartridge have to be transfered in the history log of the document, in the next section of the cover.
\item History of the document : ``about the developing process of the document'' : \\
  \textbf{This section concerns only validated documents.}\\ When a document gets the status ``validated'', the data concerning current version must be transfered in a new cell of this table (the versions are sorted by decreasing version number).
  
\end{itemize}

\clearpage
\input{./cover_template.tex}
\clearpage

% ----------------------------------------------------------------------------------------%
% section                                          %
% ----------------------------------------------------------------------------------------%
\section{Header and foot page}

the current project document use this \LaTeX code : \\

\begin{verbatim}

\input{macro.tex}

\usepackage{fancyheadings} 
\usepackage{lastpage}
% \usepackage[francais]{babel}
 
\pagestyle{fancy} 
\renewcommand{\chaptermark}[1]% 
{\markboth{{Chap-- \thechapter.\ #1}}{}} 
\renewcommand{\sectionmark}[1]% 
{\markright{{\thesection.\ #1}}} 
\setlength{\headrulewidth}{0.5pt} 
\setlength{\footrulewidth}{0.5pt} 
\newcommand{\helv}{% 
\fontfamily{phv}\fontseries{b}\fontsize{9}{11}\selectfont} 
\lhead[\helv \thepage/\pageref{LastPage}]{\helv \rightmark} 
\rhead[\helv \leftmark]{\helv \thepage/\pageref{LastPage}} 
\cfoot{NAMEDOC -- \today} %Replace NAMEDOC by your document name

\makeindex

\begin{document}
\pagestyle{empty}
\renewcommand{\arraystretch}{1.8}

\input{coverXXX.tex} %document cover file ; 


\tableofcontents
% \clearpage
\pagestyle{fancy}
\pagenumbering{arabic}
\end{verbatim}


% \newpage
\clearpage
\chapter{Reference} 
C++ Coding Standard, Yongling Ding, Ph.D, CFA, FRM.

% \newpage
% \printglosstex(acr)[p]

\cleardoublepage
\end{document}
