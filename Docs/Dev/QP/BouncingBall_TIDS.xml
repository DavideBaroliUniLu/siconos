<?xml version="1.0" encoding="UTF-8"?>

<!-- SICONOS Model XML file -->

<SiconosModel>
	<Time>
		<t0>0.0</t0>
		<T>1.0</T>
	</Time>
	<NSDS bvp='false'>	
		<!-- DSs defined in the problem -->
		<DS_Definition>		
			<DS number='1' type="LagrangianTIDS">			
				<!-- Commun at all DS -->				
				<Id> Ball </Id>					
				<n>6</n>				
				<x vectorSize='6'>
					1.0 0.0 0.0 0.0 0.0 0.0
				</x>					
				<xDot vectorSize='6'>
					1.0 0.0 0.0 0.0 0.0 0.0
				</xDot>
				<xMemory/>
				<xDotMemory/> 				
				<x0 vectorSize='6'>
					1.0 0.0 0.0 0.0 0.0 0.0
				</x0>								
				<StepsInMemory>1</StepsInMemory>				
				<vectorField plugin="BasicPlugin:vectorField"/>
				<computeJacobianX plugin="BasicPlugin:computeJacobianX"/>					
				<!-- Specific to LagrangianNLDS-->				
				<QNLInertia vectorPlugin="BallPlugin:ballQNLInertia"/>		
				<q vectorSize='3'>
					1.0 0.0 0.0
				</q>				
				<q0 vectorSize='3'>
					1.0 0.0 0.0
				</q0>			
				<qMemory/>		
				<Velocity  vectorSize='3'>
					0.0 0.0 0.0 
				</Velocity>
				<Velocity0  vectorSize='3'>
					0.0 0.0 0.0
				</Velocity0>
				<VelocityMemory/>	
				<Fint vectorPlugin="BallPlugin:ballFInt"/>
				<Fext vectorPlugin="BallPlugin:ballFExt"/>
			  	<JacobianQFint matrixPlugin="BallPlugin:ballJacobianQFInt"/>
				<JacobianVelocityFint matrixPlugin="BallPlugin:ballJacobianVelocityFInt"/>
 				<JacobianQQNLInertia matrixPlugin="BallPlugin:ballJacobianQQNLInertia"/>
 				<JacobianVelocityQNLInertia matrixPlugin="BallPlugin:ballJacobianVelocityQNLInertia"/>
				<M matrixRowSize='3' matrixColSize='3'>	
					<row>1.0 0.0 0.0</row>
					<row>0.0 1.0 0.0</row>
					<row>0.0 0.0 1.0</row>
				</M>				
				<ndof>3</ndof>								
				<K matrixFile='mat3x3.dat'/>
				<C matrixFile='mat3x3.dat'/>				
			</DS>			
			<DS number='2' type="LagrangianTIDS"> 			
				<!-- Commun at all DS -->				
				<Id> Ground </Id>				
				<n>6</n>				
				<x vectorSize='2'>
					0.0 0.0
				</x>				
				<xDot vectorSize='2'>
					0.0 0.0
				</xDot>		
				<xMemory>
					<Memory vectorSize="2">54.54 5454212.5445456456</Memory>
				</xMemory>								  
				<xDotMemory>
					<Memory vectorSize="2">54.54 5454212.5445456456</Memory>
				</xDotMemory>				
				<x0 vectorSize='2'>
					0.0 0.0
				</x0>									
				<StepsInMemory>1</StepsInMemory>				
				<vectorField plugin="BasicPlugin:vectorField"/>
				<computeJacobianX plugin="BasicPlugin:computeJacobianX"/>				
				<!-- Specific to LagrangianTIDS-->
				<QNLInertia vectorSize= '1'> 0.0 </QNLInertia>				
				<q vectorSize='1'>
					0.0
				</q>				
				<q0 vectorSize='1'>
					0.0
				</q0>
				<qMemory> 
					<Memory vectorSize="2">54.54 5454212.5445456456</Memory>
				</qMemory>				
				<Velocity vectorSize='1'>
					0.0
				</Velocity>			
				<Velocity0 vectorSize='1'>
					0.0
				</Velocity0>				
				<VelocityMemory>
					<Memory vectorSize="2">54.54 5454212.5445456456</Memory>
				</VelocityMemory>
				<Fint vectorSize='1'>
					0.0
				</Fint>
				<Fext vectorSize='1'>
					0.0
				</Fext>				
				<JacobianQFint matrixFile="mat1x1.dat"/>
				<JacobianVelocityFint matrixFile="mat1x1.dat"/>
 				<JacobianQQNLInertia matrixFile="mat1x1.dat"/>
 				<JacobianVelocityQNLInertia matrixFile="mat1x1.dat"/>	
				<M matrixRowSize='1' matrixColSize='1'>	
					<row>1.0 </row>
				</M>					
				<ndof>1</ndof>								
				<K matrixFile='mat1x1.dat'/>
				<C matrixFile='mat1x1.dat'/>	
			</DS>	
		</DS_Definition>

		<!-- Interactions defined in the problem -->		
		<Interaction_Definition>		
			<!-- A definition of a DS interaction, and list of couple of DSs who are concerned by it -->			
			<Interaction number='1'>				
				<Status>1</Status>				
				<Id>Ball-Ground</Id>			
				<nInter> 1 </nInter>			
				<!-- List of couple of DS concerned by this interaction -->
				<DS_Concerned size='1'>				
					<DS number='1' interactsWithDS_Number='2'/>											
				</DS_Concerned>												
				<!-- Relation of this interaction -->
				<Relation type="LTI">
					<computeInput plugin="BasicPlugin:computeInput"/>
					<computeOutput plugin="BasicPlugin:computeOutput"/>
					<C matrixRowSize = '1' matrixColSize = '8'>
					<row> 1.0  0.0  0.0  -1.0  0.0  0.0  0.0  0.0 </row>
					</C>
					<D matrixRowSize = '1' matrixColSize = '8'>
					<row> 0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0 </row>
					</D>					
					<E matrixRowSize = '8' matrixColSize = '1'>
					<row> 1.0 </row> 
					<row> 0.0 </row> 
					<row> 0.0 </row> 
					<row> -1.0 </row> 
					<row> 0.0 </row> 
					<row> 0.0 </row> 
					<row> 0.0 </row> 
					<row> 0.0 </row> 
					<row> 0 0 </row> 
					</E>					
					<a vectorSize='8'>
					0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
					</a>					
				</Relation>	
				<!-- NS Law of this interaction -->					
				<NS_Law type="CCNSLaw"/>					
			</Interaction>							
		</Interaction_Definition>	
	</NSDS>	
	
	<!-- Strategy to use in order to solve the problem -->					
	<Strategy type='TimeStepping'>
		<TimeDiscretisation>			
			<h isConstant='true'>0.1</h>
			<N>1</N>
			<tk vectorSize='2'>0 0</tk>
			<hMin>0</hMin>
			<hMax>0</hMax>			
		</TimeDiscretisation>	
		<!-- One Step Integrators -->		
		<OneStepIntegrator_Definition>		
			<!-- A definition of a OneStepIntegrator, and list of couple of DSs who are concerned by it -->				
			<OneStepIntegrator type="Moreau">			
				<r>1</r>
				<DS_Concerned size = '1'> <!-- Scaling -->				
					<DS number='1'/>					
				</DS_Concerned>					
			</OneStepIntegrator>
			<!-- A definition of a OneStepIntegrator, and list of couple of DSs who are concerned by it -->				
			<OneStepIntegrator type="Moreau">			
				<r>1</r>
				<DS_Concerned size = '1'>				
					<DS number='2'/>					
				</DS_Concerned>					
			</OneStepIntegrator>
		</OneStepIntegrator_Definition>		
		<!-- One Step NS Problem of th Strategy-->		
	 	<OneStepNSProblem type="LCP">		
			<!-- General for one step NS problem -->			
			<n>1</n>					
			<!-- Specific at LCP -->			
			<A matrixRowSize='1' matrixColSize='1'>
			<row> 1.0 </row>
			</A>
			<b vectorSize='1'> 1.0</b>			
			<Interaction_Concerned size = '1'>				
				<Interaction number='1'/>				
			</Interaction_Concerned>			
	 	</OneStepNSProblem>			
	</Strategy>	

</SiconosModel>
