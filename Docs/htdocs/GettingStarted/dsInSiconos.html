<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Getting Started with Siconos: Dynamical Systems formulations in Siconos</title>
<link href="WebSiconos.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1><a class="anchor" name="dsInSiconos">Dynamical Systems formulations in Siconos</a></h1><dl class="author" compact><dt><b>Author:</b></dt><dd>Franck Pérignon </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>Siconos-Kernel 1.3.0</dd></dl>
<h2><a class="anchor" name="doc_dsIntro">
Introduction</a></h2>
In Siconos, the class <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a> represent generic n-dimensional dynamical system of the form : <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*}\label{firstOrderSystem} \dot x(t) &amp;=&amp; f(x,t) + T(x) u(x, t) + r \\ x(t_0)&amp;=&amp;x_0 \end{eqnarray*}" src="form_62.png">
<p>
<p>
with: <br>
<ul>
<li>x: the state of the system - Vector of size n.</li><li>f(x,t): the vector field - Vector of size n</li><li>u(x, t): control term - Vector of size uSize.</li><li>T(x): n X uSize matrix, related to control term.</li><li>r: input due to non-smooth behavior - Vector of size n.</li></ul>
<h2><a class="anchor" name="doc_dsClassDiag">
Which are the available DynamicalSystems types?</a></h2>
<b>Classes:</b> <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a>, <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d2/d3a/classLinearDS.html">LinearDS</a>, <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d1/d6f/classLinearTIDS.html">LinearTIDS</a>, <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d8/d7f/classLagrangianDS.html">LagrangianDS</a>, <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d8/de0/classLagrangianLinearTIDS.html">LagrangianLinearTIDS</a>.<p>
<div align="center">
<img src="classDynamicalSystem.png" alt="classDynamicalSystem.png">
</div>
<p>
As shown on the class diagram above, there are five possible formulations for dynamical systems in Siconos, three for first order systems and two for second order Lagrangian systems. The main class is <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a>, all other derived from this one.<ul>
<li><a class="el" href="dsInSiconos.html#doc_nlds">DynamicalSystem</a>: first order general non linear system.</li><li><a class="el" href="dsInSiconos.html#doc_linds">LinearDS</a>: first order, linear system.</li><li><a class="el" href="dsInSiconos.html#doc_ltids">LinearTIDS</a>: first order linear system with time-invariant coefficients.</li><li><a class="el" href="dsInSiconos.html#doc_lagds">LagrangianDS</a>: second order non linear Lagrangian system.</li><li><a class="el" href="dsInSiconos.html#doc_lagtids">LagrangianLinearTIDS</a>: second order linear system with time-invariant coefficients.</li></ul>
<h2><a class="anchor" name="doc_nlds">
General non linear first order dynamical systems: class DynamicalSystem</a></h2>
This is the top class for dynamical systems. All other systems classes are derived from this one.<p>
A general dynamical systems is described by the following set of n equations, completed with initial conditions: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \label{firstOrderSystem} \dot x &amp;=&amp; f(x,t) + T(x) u(x, t) + r \\ x(t_0)&amp;=&amp;x_0 \end{eqnarray*}" src="form_63.png">
<p>
<p>
The Jacobian matrix, <img class="formulaInl" alt="$\nabla_x f(x,t)$" src="form_1.png">, of f according to x, nX n square matrix, is also a member of the class.<p>
Initial conditions are given by the member x_0, vector of size n. This corresponds to x value when simulation is starting, ie after a call to strategy-&gt;initialize(). <br>
<p>
There are plug-in functions in this class for f, its Jacobian, jacobianXF, u and T. All of them can handle a vector of user-defined parameters:<p>
<b> Required parameters:</b> n, x0, f (as a plug-in), its Jacobian.<p>
<b> Main functions of the class: </b> <div class="fragment"><pre class="fragment"><span class="comment">// For each plug-in it's first necessary to give the name and location of the function used to compute it</span>
<span class="comment">// name of the library that contains your plugin, here your function is in MyPlugin.cpp</span>
string pluginPath = <span class="stringliteral">"MyPlugin.so"</span>;  
<span class="comment">// Warning: the name of the plugin file must end with the string "Plugin"</span>
<span class="comment">// and the length of the string before "Plugin" must not exceed 6 letters. </span>
<span class="comment">// name you give to the function</span>
string functionName = <span class="stringliteral">"computeMyRhs"</span>;
ds-&gt;setComputeRHS(pluginPath, functionName);
<span class="comment">// to compute right hand side of equation \ref firstOrderSystem (saved in member rhs)</span>
ds-&gt;computeRhs(time);
<span class="comment">// to compute the Jacobian according to x of the right-hand side.</span>
ds-&gt;computeJacobianXRhs(time); 
<span class="comment">// to compute f(x,t) and save it into rhs member.</span>
ds-&gt;computeF(time);
<span class="comment">// to compute the jacobian of f(x,t), and save it into member JacobianXF :</span>
ds-&gt;computeJacobianXF(time);
</pre></div> The signature of each function (ie the number and type of arguments) must be exactly the same as the one given in <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d4/d29/DefaultPlugin_8cpp.html">Kernel/src/plugin/DefaultPlugin.cpp</a> for the corresponding function.<h2><a class="anchor" name="doc_linds">
First order linear dynamical systems: class LinearDS.</a></h2>
Derived from <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a>, described by the set of n equations and initial conditions: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \dot x(t) &amp;=&amp; A(t)x(t)+Tu(t)+b(t)+r \\ x(t_0)&amp;=&amp;x_0 \end{eqnarray*}" src="form_64.png">
<p>
 With:<p>
<ul>
<li>A(t): nXn matrix, state independent but possibly time-dependent.</li><li>b(t): Vector of size n, possibly time-dependent.</li></ul>
<p>
Other variables are those of <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a> class. <br>
 A and B have corresponding plug-in functions.<p>
Links with vectorField and its Jacobian are: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} f(x,t) &amp;=&amp; A(t)x(t)+b(t) \\ jacobianXF&amp;=&amp;\nabla_x f(x,t) = A(t) \end{eqnarray*}" src="form_65.png">
<p>
 Main functions of the class: <div class="fragment"><pre class="fragment">linds-&gt;computeRhs(time); <span class="comment">// to compute Ax+b+Tu (saved in member rhs)</span>
linds-&gt;computeJacobianXRhs(time); <span class="comment">// the jacobian</span>
<span class="comment">// to compute A(t):</span>
setComputeAFunction(pluginPath, functionName);
linds-&gt;computeA(time);
<span class="comment">// to compute b(t):</span>
setComputeBFunction(pluginPath, functionName);
linds-&gt;computeB(time);
</pre></div><h2><a class="anchor" name="doc_ltids">
First order time-invariant linear dynamical systems: class LinearTIDS</a></h2>
Derived from <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a>, described by the set of n equations and initial conditions: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \dot x(t) &amp;=&amp; Ax(t)+Tu(t)+b+r \\ x(t_0)&amp;=&amp;x_0 \end{eqnarray*}" src="form_66.png">
<p>
 With:<p>
<ul>
<li>A(t): nXn constant matrix.</li><li>b(t): constant vector of size n.</li></ul>
<p>
Other variables are those of <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a> class. <br>
<p>
Links with vectorField and its Jacobian are: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} f(x,t) &amp;=&amp; Ax(t)+b \\ jacobianXF&amp;=&amp;\nabla_x f(x,t) = A \end{eqnarray*}" src="form_67.png">
<p>
 Main functions of the class: <div class="fragment"><pre class="fragment">ltids-&gt;computeRhs(time) <span class="comment">// to compute Ax+b+Tu (saved in member rhs)</span>
ltids-&gt;computeJacobianXRhs(time) <span class="comment">// to compute A(t).</span>
</pre></div><h2><a class="anchor" name="doc_lagds">
Second order non linear Lagrangian dynamical systems</a></h2>
class <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d8/d7f/classLagrangianDS.html">LagrangianDS</a><p>
Lagrangian second order non linear systems are described by the following set of nDof equations + initial conditions: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} M(q) \ddot q + NNL(\dot q, q) + F_{Int}(\dot q , q , t) &amp;=&amp; F_{Ext}(t) + p \\ q(t_0) &amp;=&amp; q0 \\ \dot q(t_0) &amp;=&amp; velocity0 \end{eqnarray*}" src="form_68.png">
<p>
 With:<p>
<ul>
<li>M(q): nDofX nDof matrix of inertia.</li><li>q: state of the system - Vector of size nDof.</li><li><img class="formulaInl" alt="$\dot q$" src="form_25.png"> or velocity: derivative of the state according to time - Vector of size nDof.</li><li><img class="formulaInl" alt="$NNL(\dot q, q)$" src="form_27.png">: non linear terms, time-independent - Vector of size nDof.</li><li><img class="formulaInl" alt="$F_{Int}(\dot q , q , t)$" src="form_28.png">: time-dependent linear terms - Vector of size nDof.</li><li><img class="formulaInl" alt="$F_{Ext}(t)$" src="form_29.png">: external forces, time-dependent BUT do not depend on state - Vector of size nDof.</li><li>p: input due to non-smooth behavior - Vector of size nDof.</li></ul>
<p>
The following Jacobian are also member of this class:<p>
<ul>
<li>jacobianQFInt = <img class="formulaInl" alt="$\nabla_q F_{Int}(t,q,\dot q)$" src="form_31.png"> - nDofX nDof matrix.</li><li>jacobianVelocityFInt = <img class="formulaInl" alt="$\nabla_{\dot q} F_{Int}(t,q,\dot q)$" src="form_32.png"> - nDof X nDof matrix.</li><li>jacobianQNNL = <img class="formulaInl" alt="$\nabla_q NNL(q,\dot q)$" src="form_33.png"> - nDof X nDof matrix.</li><li>jacobianVelocityNNL = <img class="formulaInl" alt="$\nabla_{\dot q}NNL(q,\dot q)$" src="form_34.png"> - nDof X nDof matrix.</li></ul>
<p>
There are plug-in functions in this class for F_{int}, F_{Ext}, M, NNL and the four Jacobian matrices. All of them can handle a vector of user-defined parameters. <br>
 Call computeOperator(...) to compute value for operator = {FInt, FExt, Mass, NNL, JacobianQFInt, JacobianVelocityFInt, JacobianQNNL,JacobianVelocityNNL}. For any of them, link with plug-in function must be set using setComputeOperatorFunction(pluginPath,pluginName).<p>
Links with first order dynamical system are: With <img class="formulaInl" alt="$0_{n}$" src="form_46.png"> a vector of zero of size n, <img class="formulaInl" alt="$0_{n X m}$" src="form_69.png"> a n X m zero matrix and <img class="formulaInl" alt="$I_{n X n}$" src="form_70.png">, identity n X n matrix. <br>
<p>
Warning: control terms (Tu) are not fully implemented in Lagrangian systems. This will be part of future version.<h2><a class="anchor" name="doc_lagtids">
Second order linear and time-invariant Lagrangian dynamical systems: class LagrangianLinearTIDS</a></h2>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} M \ddot q + C \dot q + K q = F_{Ext}(t) + p \end{eqnarray*}" src="form_71.png">
<p>
<p>
With:<p>
<ul>
<li>C: constant viscosity nDof X nDof matrix</li><li>K: constant rigidity nDof X nDof matrix</li></ul>
<p>
And: <p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} F_{Int} &amp;=&amp; C \dot q + K q \\ NNL &amp;=&amp; 0_{nDof} \end{eqnarray*}" src="form_72.png">
<p>
<h2><a class="anchor" name="doc_dsPlugin">
Dynamical Systems plug-in functions.</a></h2>
See <a class="el" href="doc_usingPlugin.html">Siconos Plug-in Functions</a> for details on how to use a plug-in in Siconos. <br>
<p>
<ul>
<li><a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/dc/da1/classDynamicalSystem.html">DynamicalSystem</a>: <img class="formulaInl" alt="$ f(x,t), \ \ \nabla_x f(x,t), \ \ T(x), \ \ u(x,t) $" src="form_92.png"></li><li><a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d2/d3a/classLinearDS.html">LinearDS</a>: A(t), b(t)</li><li><a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d8/d7f/classLagrangianDS.html">LagrangianDS</a>: <img class="formulaInl" alt="$ M(q), \ \ NNL(\dot q,q), \ \ F_{Int}(\dot q,q ,t), \ \ F_{Ext}(t), \ \ \nabla_q F_{Int}(t,q,\dot q), \ \ \nabla_{\dot q}F_{Int}(t,q,\dot q), \ \ \nabla_q NNL(q,\dot q), \ \ \nabla_{\dot q}NNL(q,\dot q) $" src="form_93.png">.</li></ul>
<p>
Mind that any item present in a class is also available in its derived classes. This means for example that <img class="formulaInl" alt="$F_{Ext}(t)$" src="form_29.png"> has a plug-in function for <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d8/de0/classLagrangianLinearTIDS.html">LagrangianLinearTIDS</a>.<br>
<p>
Warning: if you create a new system using the copy constructor, any existing parameters in plug-in functions will also be copied. This means that no link between pointer for <a class="elRef" doxygen="DoxygenKernel.tag:../Doxygen/" href="../Doxygen/d0/dd6/classSimpleVector.html">SimpleVector</a> parameters will remain. In that case it may be better to re-set properly your parameters for the new created dynamical system. <hr size="1"><address style="align: right;"><small>Generated on Tue Nov 28 18:46:18 2006 for Getting Started with Siconos by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
